# OpenWrt 智能监控脚本（青龙面板最终版）
## 核心功能
- 8小时周期汇总推送企业微信（科技感可视化通知）
- 30分钟阶梯检测（异常缩短至5分钟，连续正常延长至45分钟）
- 手动终止/异常中断/周期结束均推送结果，无数据丢失
- 推送成功后10分钟自动清理日志，释放Docker存储空间
- 极致降负载：CPU≤5%，内存≤20MB，适配青龙+Docker长期运行

## 部署步骤
1. 青龙面板 → 订阅管理 → 添加订阅：
   - 名称：OpenWrt智能监控
   - 类型：公开仓库
   - 链接：https://github.com/Cigarr/openwrt-intelligent-monitor.git
   - 分支：main
   - 黑名单：config.py（关键！避免更新覆盖配置）
   - 文件后缀：py
2. 运行订阅后，青龙自动生成定时任务（每8小时执行）
3. 修改config.py中的企业微信信息和检测目标即可使用

## 核心优化
- DNS缓存：5分钟内复用解析结果，减少网络请求
- 并行检测：3线程并行，检测耗时≤2s
- 资源回收：实时GC，检测后立即释放线程/内存
- 日志管理：自动清理7天前日志，推送成功后10分钟清理本次日志
- 异常防抖：2次异常后才记录，避免网络抖动误报